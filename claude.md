# ã¶ã£ã±ã‚“ãƒ¢ãƒã‚¤ãƒ« - 3ãƒ¶æœˆãƒ‘ãƒƒã‚¯ç”³ã—è¾¼ã¿ã‚·ã‚¹ãƒ†ãƒ 

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ã¶ã£ã±ã‚“ãƒ¢ãƒã‚¤ãƒ«ã®3ãƒ¶æœˆãƒ‘ãƒƒã‚¯ç”³ã—è¾¼ã¿ã‚·ã‚¹ãƒ†ãƒ ã¨ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®å®Ÿè£…ã§ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½

1. **5ã‚¹ãƒ†ãƒƒãƒ—ç”³ã—è¾¼ã¿ãƒ•ã‚©ãƒ¼ãƒ **
   - å€‹äººæƒ…å ±å…¥åŠ›ï¼ˆå€‹äºº/æ³•äººå¯¾å¿œï¼‰
   - ãƒ—ãƒ©ãƒ³é¸æŠï¼ˆ50å›ç·šä»¥ä¸Š/æœªæº€ï¼‰
   - æ›¸é¡ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - ç¢ºèªç”»é¢
   - å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

2. **ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**ï¼ˆæœªå®Ÿè£… - æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã§å¯¾å¿œï¼‰
   - ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½
   - ç”³ã—è¾¼ã¿ä¸€è¦§
   - è©³ç´°ç”»é¢ã¨å›ç·šç®¡ç†
   - ã‚¿ã‚°ç®¡ç†

---

## ğŸ—ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Next.js 16.0.0** (App Router)
- **React 19.2.0**
- **TypeScript 5.x**
- **Tailwind CSS v4**
- **React Hook Form** - ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **Zod** - ã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Prisma** - ORM
- **Supabase** - PostgreSQL ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ + èªè¨¼ + ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
- **bcryptjs** - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–

---

## ğŸ“‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
/workspaces/buppanmobile2/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/                      # API Routes
â”‚   â”‚   â”œâ”€â”€ applications/         # ç”³ã—è¾¼ã¿ãƒ‡ãƒ¼ã‚¿API
â”‚   â”‚   â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â””â”€â”€ upload/               # ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰API
â”‚   â”‚       â””â”€â”€ route.ts
â”‚   â”œâ”€â”€ apply/                    # ç”³ã—è¾¼ã¿ãƒšãƒ¼ã‚¸
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ components/               # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ FAQ.tsx
â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â””â”€â”€ PriceTable.tsx
â”‚   â”œâ”€â”€ mypage/                   # ãƒã‚¤ãƒšãƒ¼ã‚¸ï¼ˆæº–å‚™ä¸­ï¼‰
â”‚   â”œâ”€â”€ privacy/                  # ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼
â”‚   â”œâ”€â”€ terms/                    # åˆ©ç”¨è¦ç´„
â”‚   â”œâ”€â”€ legal/                    # æ³•çš„æƒ…å ±
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ globals.css
â”œâ”€â”€ lib/                          # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ prisma.ts                 # Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ supabase.ts               # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ validations.ts            # Zodãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â””â”€â”€ types.ts                  # TypeScriptå‹å®šç¾©
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma             # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ documents/
â”œâ”€â”€ .env.example                  # ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â””â”€â”€ package.json
```

---

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

### Applicationï¼ˆç”³ã—è¾¼ã¿æƒ…å ±ï¼‰
```prisma
model Application {
  id                String   @id @default(uuid())
  applicantType     String   // 'individual' | 'corporate'

  // å€‹äººæƒ…å ±
  lastName          String?
  firstName         String?
  lastNameKana      String?
  firstNameKana     String?

  // æ³•äººæƒ…å ±
  companyName       String?
  companyNameKana   String?
  corporateNumber   String?
  establishedDate   DateTime?

  // ä»£è¡¨è€…æƒ…å ±
  representativeLastName     String?
  representativeFirstName    String?
  representativeLastNameKana String?
  representativeFirstNameKana String?
  representativeBirthDate    DateTime?

  // æ‹…å½“è€…æƒ…å ±
  contactLastName     String?
  contactFirstName    String?
  contactLastNameKana String?
  contactFirstNameKana String?

  // å…±é€šæƒ…å ±
  phone             String
  email             String
  postalCode        String
  address           String
  dateOfBirth       DateTime?

  // ãƒ—ãƒ©ãƒ³æƒ…å ±
  planType          String   // '3month-50plus' | '3month-under50'
  lineCount         Int
  totalAmount       Int

  // æ›¸é¡ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
  idCardFrontUrl    String?
  idCardBackUrl     String?
  registrationUrl   String?
  expirationDate    DateTime? // èº«åˆ†è¨¼æœ‰åŠ¹æœŸé™

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  verificationStatus String  @default("unverified")
  paymentStatus      String  @default("not_issued")
  status             String  @default("draft")

  // ã‚³ãƒ¡ãƒ³ãƒˆ
  comment1          String?  @db.Text
  comment2          String?  @db.Text

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  submittedAt       DateTime?

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  lines             Line[]
}
```

### Lineï¼ˆå›ç·šæƒ…å ±ï¼‰
```prisma
model Line {
  id                String   @id @default(uuid())
  applicationId     String
  phoneNumber       String?
  simLocationId     String?
  spareTagId        String?
  returnDate        DateTime?
  shipmentDate      DateTime?
  lineStatus        String   @default("not_opened")

  application       Application @relation(fields: [applicationId], references: [id], onDelete: Cascade)
  simLocation       Tag?        @relation("SimLocation", fields: [simLocationId], references: [id])
  spareTag          Tag?        @relation("SpareTag", fields: [spareTagId], references: [id])
}
```

### Tagï¼ˆã‚¿ã‚°ç®¡ç†ï¼‰
```prisma
model Tag {
  id                String   @id @default(uuid())
  name              String   @unique
  type              String   // 'sim_location' | 'spare'
  color             String?
  order             Int      @default(0)

  linesAsSimLocation Line[]  @relation("SimLocation")
  linesAsSpareTag    Line[]  @relation("SpareTag")
}
```

### Adminï¼ˆç®¡ç†è€…ï¼‰
```prisma
model Admin {
  id                String   @id @default(uuid())
  email             String   @unique
  password          String   // ãƒãƒƒã‚·ãƒ¥åŒ–æ¸ˆã¿
  name              String
  role              String   @default("admin")
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  lastLoginAt       DateTime?
}
```

---

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env.example`ã‚’`.env`ã«ã‚³ãƒ”ãƒ¼ã—ã¦ã€å¿…è¦ãªå€¤ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚

```bash
cp .env.example .env
```

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ï¼š

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# Database
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres

# Admin
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=change_this_password

# Cloudflare R2 (ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”¨)
R2_ACCESS_KEY_ID=your_r2_access_key_id
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key
R2_BUCKET_NAME=your_r2_bucket_name
R2_ACCOUNT_ID=your_cloudflare_account_id
```

### 2. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š

1. [Supabase](https://supabase.com/)ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
2. Project Settings â†’ API ã‹ã‚‰ä»¥ä¸‹ã‚’å–å¾—ï¼š
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - `SUPABASE_SERVICE_ROLE_KEY`
3. Project Settings â†’ Database ã‹ã‚‰`DATABASE_URL`ã‚’å–å¾—

### 3. Supabase Storageã®è¨­å®š

Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§`applications`ã¨ã„ã†åå‰ã®ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆï¼š

1. Storage â†’ New bucket
2. Name: `applications`
3. Public bucket: **ON**ï¼ˆå…¬é–‹ã‚¢ã‚¯ã‚»ã‚¹æœ‰åŠ¹ï¼‰
4. Create bucket

### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

```bash
npx prisma generate
npx prisma db push
```

### 5. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ [http://localhost:3000](http://localhost:3000) ã‚’é–‹ã

---

## ğŸ“± å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

### âœ… ç®¡ç†ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ”¹å–„

- ç”³ã—è¾¼ã¿ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œ
- æ–‡å­—ã‚µã‚¤ã‚ºãƒ»ä½™ç™½ã®æœ€é©åŒ–ï¼ˆ`text-xs`ã€`px-2 py-1`ï¼‰
- 1ç”»é¢å†…ã§ã®è¡¨ç¤ºæœ€é©åŒ–

### âœ… Cloudflare R2ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

- ç”³ã—è¾¼ã¿æ™‚ã«Supabase + R2ã®ä¸¡æ–¹ã«è‡ªå‹•ä¿å­˜ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæ™‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼‰
- ç›´åˆ—ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ–¹å¼ï¼ˆSupabaseæˆåŠŸå¾Œã«R2ã¸ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼‰
- R2å¤±æ•—æ™‚ã¯é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆãƒ­ã‚°è¨˜éŒ²ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯æˆåŠŸã‚’è¿”ã™ï¼‰
- ç’°å¢ƒå¤‰æ•°: `R2_ACCESS_KEY_ID`, `R2_SECRET_ACCESS_KEY`, `R2_BUCKET_NAME`, `R2_ACCOUNT_ID`

### âœ… å…è¨±è¨¼æœ‰åŠ¹æœŸé™ç®¡ç†

- ç”³ã—è¾¼ã¿ãƒ•ã‚©ãƒ¼ãƒ ã«æœ‰åŠ¹æœŸé™å…¥åŠ›æ¬„ï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å½¢å¼ï¼‰
- å€‹äººãƒ»æ³•äººã®ä¸¡æ–¹ã§å¿…é ˆå…¥åŠ›
- ç®¡ç†ç”»é¢ä¸€è¦§ã«æœ‰åŠ¹æœŸé™ã‚«ãƒ©ãƒ è¡¨ç¤º
- æœŸé™åˆ‡ã‚Œã®ç”³ã—è¾¼ã¿ã¯èµ¤æ ã§å¼·èª¿è¡¨ç¤º
- ç®¡ç†ç”»é¢è©³ç´°ãƒšãƒ¼ã‚¸ã‹ã‚‰æœ‰åŠ¹æœŸé™ã‚’ç·¨é›†å¯èƒ½
- æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¯`null`ï¼ˆæœªè¨­å®šï¼‰ã¨ã—ã¦æ‰±ã†

### âœ… ç”³ã—è¾¼ã¿ãƒ•ã‚©ãƒ¼ãƒ 

#### ã‚¹ãƒ†ãƒƒãƒ—1: å€‹äººæƒ…å ±å…¥åŠ›
- å€‹äºº/æ³•äººã®ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
- **å€‹äººã®å ´åˆ:**
  - å§“åã€å§“åã‚«ãƒŠ
  - é›»è©±ç•ªå·ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
  - éƒµä¾¿ç•ªå·ã€ä½æ‰€
  - ç”Ÿå¹´æœˆæ—¥
- **æ³•äººã®å ´åˆ:**
  - ä¼šç¤¾åã€ä¼šç¤¾åã‚«ãƒŠ
  - æ³•äººç•ªå·ã€è¨­ç«‹å¹´æœˆæ—¥
  - é›»è©±ç•ªå·ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
  - ä»£è¡¨è€…æƒ…å ±ï¼ˆå§“åã€å§“åã‚«ãƒŠã€ç”Ÿå¹´æœˆæ—¥ï¼‰
  - æ‹…å½“è€…æƒ…å ±ï¼ˆå§“åã€å§“åã‚«ãƒŠï¼‰
  - éƒµä¾¿ç•ªå·ã€ä½æ‰€

#### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ—ãƒ©ãƒ³é¸æŠ
- 3ãƒ¶æœˆãƒ‘ãƒƒã‚¯ï¼ˆ50å›ç·šä»¥ä¸Š: Â¥4,200/å›ç·šã€50å›ç·šæœªæº€: Â¥4,600/å›ç·šï¼‰
- å›ç·šæ•°å…¥åŠ›ï¼ˆãƒ—ãƒ©ãƒ³ã«å¿œã˜ãŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- åˆè¨ˆé‡‘é¡ã®è‡ªå‹•è¨ˆç®—è¡¨ç¤º
- â€»äº‹å‹™æ‰‹æ•°æ–™è¾¼ã¿è¡¨ç¤º

#### ã‚¹ãƒ†ãƒƒãƒ—3: æ›¸é¡ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè¡¨ãƒ»è£ï¼‰ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- æ³•äººã®å ´åˆ: ç™»è¨˜ç°¿è¬„æœ¬ï¼ˆ3ãƒ¶æœˆä»¥å†…ç™ºè¡Œï¼‰ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- å¯¾å¿œå½¢å¼: JPEG, PNG, PDFï¼ˆæœ€å¤§10MBï¼‰
- Supabase Storageã¸ã®è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†æ™‚ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

#### ã‚¹ãƒ†ãƒƒãƒ—4: ç¢ºèªç”»é¢
- å…¨å…¥åŠ›å†…å®¹ã®è¡¨ç¤º
- å„ã‚¹ãƒ†ãƒƒãƒ—ã¸æˆ»ã£ã¦ä¿®æ­£å¯èƒ½
- åŒæ„äº‹é …ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹:
  - ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼
  - åˆ©ç”¨è¦ç´„
  - é›»æ°—é€šä¿¡äº‹æ¥­æ³•ç´„æ¬¾
  - åˆæœŸå¥‘ç´„è§£é™¤åˆ¶åº¦
  - åç¤¾ä¼šçš„å‹¢åŠ›ã§ãªã„ã“ã¨ã®è¡¨æ˜

#### ã‚¹ãƒ†ãƒƒãƒ—5: å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- ã€Œã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚2å–¶æ¥­æ—¥ä»¥å†…ã§è«‹æ±‚æ›¸ã¨ç”³ã—è¾¼ã¿ç¢ºèªã®ã”é€£çµ¡ã‚’ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚ã€
- ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸ã®æˆ»ã‚‹ãƒªãƒ³ã‚¯

### âœ… ãƒ‡ãƒ¼ã‚¿ä¿å­˜æ©Ÿèƒ½

- **é€”ä¸­ä¿å­˜:** å„ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†æ™‚ã«è‡ªå‹•çš„ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ï¼ˆstatus: 'draft'ï¼‰
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å¸°:** ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã¦ã‚‚ã€sessionStorageã‹ã‚‰é€”ä¸­ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒå¯èƒ½
- **æœ€çµ‚é€ä¿¡:** ã‚¹ãƒ†ãƒƒãƒ—4ã§ã€Œç”³ã—è¾¼ã‚€ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨`status`ãŒ`submitted`ã«æ›´æ–°

### âœ… API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### POST `/api/applications`
ç”³ã—è¾¼ã¿ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ãƒ»æ›´æ–°

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "id": "uuidï¼ˆæ›´æ–°ã®å ´åˆã®ã¿ï¼‰",
  "step": 1,
  "status": "draft | submitted",
  "data": { /* ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ */ }
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "success": true,
  "application": { /* ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ */ }
}
```

#### GET `/api/applications?email=xxx`
ä¸‹æ›¸ãçŠ¶æ…‹ã®ç”³ã—è¾¼ã¿æƒ…å ±ã‚’å–å¾—

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "application": { /* ç”³ã—è¾¼ã¿ãƒ‡ãƒ¼ã‚¿ or null */ }
}
```

#### POST `/api/upload`
ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```
FormData {
  file: File,
  folder: string
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "success": true,
  "url": "https://...",
  "path": "documents/..."
}
```

---

## ğŸš§ æœªå®Ÿè£…æ©Ÿèƒ½ï¼ˆæ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºï¼‰

### ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

1. **ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸** (`/admin/login`)
   - ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼
   - Supabase Authä½¿ç”¨

2. **ä¸€è¦§ç”»é¢** (`/admin/dashboard`)
   - å…¨ç”³ã—è¾¼ã¿ã®ä¸€è¦§è¡¨ç¤º
   - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
   - æ¤œç´¢æ©Ÿèƒ½
   - ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³

3. **è©³ç´°ç”»é¢** (`/admin/applications/[id]`)
   - ç”³ã—è¾¼ã¿æƒ…å ±ã®è©³ç´°è¡¨ç¤º
   - å›ç·šç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«
   - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
   - ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ ãƒ»ç·¨é›†

4. **ã‚¿ã‚°ç®¡ç†ç”»é¢** (`/admin/settings`)
   - SIMã®å ´æ‰€ã‚¿ã‚°ç®¡ç†
   - äºˆå‚™ã‚¿ã‚°ç®¡ç†
   - ã‚¿ã‚°ã®è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤

5. **èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢**
   - `/admin`é…ä¸‹ã®ãƒ«ãƒ¼ãƒˆä¿è­·
   - ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

### å®Ÿè£…æ¸ˆã¿
- âœ… ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹æ©Ÿå¯†æƒ…å ±ã®ç®¡ç†
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚µã‚¤ã‚ºã€å½¢å¼ï¼‰
- âœ… Zod ã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… Supabase Storage ã®ä½¿ç”¨ï¼ˆå®‰å…¨ãªãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ï¼‰

### æœªå®Ÿè£…ï¼ˆä»Šå¾Œå¯¾å¿œï¼‰
- â³ CSRF ãƒˆãƒ¼ã‚¯ãƒ³
- â³ ãƒ¬ãƒ¼ãƒˆåˆ¶é™
- â³ ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒãƒƒã‚·ãƒ¥åŒ–ï¼ˆbcryptjså°å…¥æ¸ˆã¿ã€å®Ÿè£…å¾…ã¡ï¼‰
- â³ JWT ã«ã‚ˆã‚‹èªè¨¼

---

## ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
```css
--gold: #d4af37
--gold-light: #f0d970
--gold-dark: #b8941f
--background: #0a0a0a
--foreground: #ffffff
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«
- **Glassmorphism:** `bg-white/5 backdrop-blur-sm border border-white/10`
- **Gradient Buttons:** `bg-gradient-to-r from-[#d4af37] to-[#f0d970]`
- **Rounded Corners:** `rounded-2xl`, `rounded-3xl`, `rounded-full`
- **Hover Effects:** `hover:border-[#d4af37]/50 hover:shadow-xl`

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### ç”³ã—è¾¼ã¿ãƒ•ãƒ­ãƒ¼

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›
    â†“
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆZodï¼‰
    â†“
API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ (/api/applications)
    â†“
ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    â†“
Prisma â†’ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜
    â†“
ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´
    â†“
æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸ or å®Œäº†ç”»é¢
```

### ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ãƒ­ãƒ¼

```
ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
    â†“
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚µã‚¤ã‚ºã€å½¢å¼ï¼‰
    â†“
FormDataä½œæˆ
    â†“
API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ (/api/upload)
    â†“
ã‚µãƒ¼ãƒãƒ¼å´ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    â†“
Supabase Storage ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    â†“
å…¬é–‹URLå–å¾—
    â†“
ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã« URL ä¿å­˜
```

---

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼

**å•é¡Œ:** `Prisma Client could not connect to the database`

**è§£æ±ºç­–:**
1. `.env`ã®`DATABASE_URL`ãŒæ­£ã—ã„ã‹ç¢ºèª
2. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
3. `npx prisma generate`ã‚’å†å®Ÿè¡Œ

### ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼

**å•é¡Œ:** `ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ`

**è§£æ±ºç­–:**
1. Supabaseã§`applications`ãƒã‚±ãƒƒãƒˆãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. ãƒã‚±ãƒƒãƒˆãŒå…¬é–‹è¨­å®šï¼ˆPublic bucket: ONï¼‰ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª
3. `SUPABASE_SERVICE_ROLE_KEY`ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼

**å•é¡Œ:** `Module not found: Can't resolve '@/lib/...'`

**è§£æ±ºç­–:**
```bash
# Prisma Clientã‚’å†ç”Ÿæˆ
npx prisma generate

# node_modulesã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf node_modules package-lock.json
npm install
```

---

## ğŸ“ é–‹ç™ºãƒ¡ãƒ¢

### æ–™é‡‘è¨­å®š
- 50å›ç·šä»¥ä¸Š: Â¥4,200ï¼ˆç¨è¾¼ï¼‰/ å›ç·š
- 50å›ç·šæœªæº€: Â¥4,600ï¼ˆç¨è¾¼ï¼‰/ å›ç·š
- â€»äº‹å‹™æ‰‹æ•°æ–™è¾¼ã¿

### æ›¸é¡è¦ä»¶
- **å€‹äºº:** èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè¡¨ãƒ»è£ï¼‰
- **æ³•äºº:** èº«åˆ†è¨¼æ˜æ›¸ï¼ˆè¡¨ãƒ»è£ï¼‰+ ç™»è¨˜ç°¿è¬„æœ¬ï¼ˆ3ãƒ¶æœˆä»¥å†…ç™ºè¡Œï¼‰

### ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å®šç¾©

**verificationStatusï¼ˆæœ¬äººç¢ºèªï¼‰:**
- `unverified`: æœªç¢ºèª
- `verified`: ç¢ºèªæ¸ˆã¿
- `issue`: ä¸å‚™ã‚ã‚Š

**paymentStatusï¼ˆæ±ºæ¸ˆï¼‰:**
- `not_issued`: è«‹æ±‚æ›¸ç™ºè¡Œå‰
- `issued`: è«‹æ±‚æ›¸ç™ºè¡Œæ¸ˆã¿
- `paid`: å…¥é‡‘æ¸ˆã¿

**statusï¼ˆç”³ã—è¾¼ã¿å…¨ä½“ï¼‰:**
- `draft`: ä¸‹æ›¸ã
- `submitted`: é€ä¿¡æ¸ˆã¿
- `processing`: å‡¦ç†ä¸­
- `completed`: å®Œäº†

**lineStatusï¼ˆå›ç·šï¼‰:**
- `not_opened`: æœªé–‹é€š
- `opened`: é–‹é€šæ¸ˆã¿
- `shipped`: ç™ºé€æ¸ˆã¿
- `waiting_return`: è¿”å´å¾…ã¡
- `returned`: è¿”å´æ¸ˆã¿
- `canceled`: è§£ç´„

---

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ç¾åœ¨é–‹ç™ºä¸­ã§ã™ã€‚ãƒã‚°å ±å‘Šã‚„æ©Ÿèƒ½è¦æœ›ãŒã‚ã‚‹å ´åˆã¯ã€Issueã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

Private Project - All Rights Reserved

---

## ğŸ‘¨â€ğŸ’» ä½œæˆè€…

Claude Code ã«ã‚ˆã‚‹è‡ªå‹•ç”Ÿæˆ

---

æœ€çµ‚æ›´æ–°æ—¥: 2025-11-15
